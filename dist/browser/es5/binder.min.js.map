{"version":3,"file":"binder.min.js","sources":["binder.min.js"],"sourcesContent":["\"use strict\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar Binder = function () {\n  /*\n  bind: function (\n  \tobj: object,\n  \tprop: string,\n  \tcbk: function () => void\n  ) => object\n  */\n  function bind(emitter, property, callback, owner) {\n    if (!emitter._binder) {\n      Object.defineProperty(emitter, '_binder', {\n        configurable: true,\n        value: {}\n      });\n    }\n\n    if (!emitter._binder[property]) {\n      emitter._binder[property] = {\n        value: emitter[property],\n        callbacks: []\n      };\n      Object.defineProperty(emitter, property, {\n        configurable: true,\n        get: function get() {\n          return this._binder[property].value;\n        },\n        set: function set(newValue) {\n          var oldValue = this._binder[property].value;\n\n          if (newValue !== oldValue) {\n            this._binder[property].value = newValue;\n\n            var callbacks = _toConsumableArray(this._binder[property].callbacks);\n\n            for (var index = 0, length = callbacks.length; index < length; index++) {\n              callbacks[index].callback(newValue, oldValue);\n            }\n          }\n        }\n      });\n    }\n\n    emitter._binder[property].callbacks.push({\n      callback: callback,\n      owner: owner\n    });\n\n    return emitter;\n  }\n  /*\n  bind: function (\n  \tobj: object,\n  \tprop: undefined | null | string,\n  \tcbk: undefined | null | function () => void\n  ) => object\n  */\n\n\n  function unbind(emitter, property, callback, owner) {\n    if (emitter._binder) {\n      var process = function process(property) {\n        // Remove callback\n        var index = 0;\n\n        while (index < emitter._binder[property].callbacks.length) {\n          if (callback == null || callback === emitter._binder[property].callbacks[index].callback || owner == null || owner === emitter._binder[property].callbacks[index].owner) {\n            emitter._binder[property].callbacks.splice(index, 1);\n\n            continue;\n          }\n\n          index++;\n        } // Remove property\n\n\n        if (emitter._binder[property].callbacks.length === 0) {\n          delete emitter[property];\n          emitter[property] = emitter._binder[property].value;\n          delete emitter._binder[property]; // Remove binder\n\n          var isEmpty = true;\n\n          for (var key in emitter._binder) {\n            // eslint-disable-line no-unused-vars\n            isEmpty = false;\n            break;\n          }\n\n          if (isEmpty) {\n            delete emitter._binder;\n          }\n        }\n      };\n\n      if (property == null) {\n        for (var key in emitter._binder) {\n          process(key);\n        }\n      } else {\n        process(property);\n      }\n    }\n\n    return emitter;\n  }\n\n  return {\n    bind: bind,\n    unbind: unbind\n  };\n}();\n/* exported Binder */"],"names":["_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","Binder","bind","emitter","property","callback","owner","_binder","defineProperty","configurable","value","callbacks","get","this","set","newValue","oldValue","index","push","unbind","process","splice","key","isEmpty"],"mappings":"aAEA,SAASA,mBAAmBC,GAAO,OAAOC,mBAAmBD,IAAQE,iBAAiBF,IAAQG,4BAA4BH,IAAQI,qBAElI,SAASA,qBAAuB,MAAM,IAAIC,UAAU,wIAEpD,SAASF,4BAA4BG,EAAGC,GAAU,GAAKD,EAAL,CAAgB,GAAiB,iBAANA,EAAgB,OAAOE,kBAAkBF,EAAGC,GAAS,IAAIE,EAAIC,OAAOC,UAAUC,SAASC,KAAKP,GAAGQ,MAAM,GAAI,GAAiE,MAAU,SAAlCL,EAA3B,WAANA,GAAkBH,EAAES,YAAiBT,EAAES,YAAYC,KAAUP,IAAqB,QAANA,EAAoBQ,MAAMC,KAAKZ,GAAc,cAANG,GAAqB,2CAA2CU,KAAKV,GAAWD,kBAAkBF,EAAGC,QAAzG,GAE7S,SAASL,iBAAiBkB,GAAQ,GAAsB,oBAAXC,QAAmD,MAAzBD,EAAKC,OAAOC,WAA2C,MAAtBF,EAAK,cAAuB,OAAOH,MAAMC,KAAKE,GAEtJ,SAASnB,mBAAmBD,GAAO,GAAIiB,MAAMM,QAAQvB,GAAM,OAAOQ,kBAAkBR,GAEpF,SAASQ,kBAAkBR,EAAKwB,IAAkB,MAAPA,GAAeA,EAAMxB,EAAIyB,UAAQD,EAAMxB,EAAIyB,QAAQ,IAAK,IAAIC,EAAI,EAAGC,EAAO,IAAIV,MAAMO,GAAME,EAAIF,EAAKE,IAAOC,EAAKD,GAAK1B,EAAI0B,GAAM,OAAOC,EAEhL,IAAIC,OA0GK,CACLC,KAnGF,SAAcC,EAASC,EAAUC,EAAUC,GAuCzC,OAtCKH,EAAQI,SACXxB,OAAOyB,eAAeL,EAAS,UAAW,CACxCM,cAAc,EACdC,MAAO,KAINP,EAAQI,QAAQH,KACnBD,EAAQI,QAAQH,GAAY,CAC1BM,MAAOP,EAAQC,GACfO,UAAW,IAEb5B,OAAOyB,eAAeL,EAASC,EAAU,CACvCK,cAAc,EACdG,IAAK,WACH,OAAOC,KAAKN,QAAQH,GAAUM,OAEhCI,IAAK,SAAaC,GAChB,IAAIC,EAAWH,KAAKN,QAAQH,GAAUM,MAEtC,GAAIK,IAAaC,EAAU,CACzBH,KAAKN,QAAQH,GAAUM,MAAQK,EAI/B,IAFA,IAAIJ,EAAYvC,mBAAmByC,KAAKN,QAAQH,GAAUO,WAEjDM,EAAQ,EAAGnB,EAASa,EAAUb,OAAQmB,EAAQnB,EAAQmB,IAC7DN,EAAUM,GAAOZ,SAASU,EAAUC,QAO9Cb,EAAQI,QAAQH,GAAUO,UAAUO,KAAK,CACvCb,SAAUA,EACVC,MAAOA,IAGFH,GA6DPgB,OAlDF,SAAgBhB,EAASC,EAAUC,EAAUC,GAC3C,GAAIH,EAAQI,QAAS,CACnB,IAAIa,EAAU,SAAiBhB,GAI7B,IAFA,IAAIa,EAAQ,EAELA,EAAQd,EAAQI,QAAQH,GAAUO,UAAUb,QACjC,MAAZO,GAAoBA,IAAaF,EAAQI,QAAQH,GAAUO,UAAUM,GAAOZ,UAAqB,MAATC,GAAiBA,IAAUH,EAAQI,QAAQH,GAAUO,UAAUM,GAAOX,MAChKH,EAAQI,QAAQH,GAAUO,UAAUU,OAAOJ,EAAO,GAKpDA,IAIF,GAAmD,IAA/Cd,EAAQI,QAAQH,GAAUO,UAAUb,OAAc,QAC7CK,EAAQC,GACfD,EAAQC,GAAYD,EAAQI,QAAQH,GAAUM,aACvCP,EAAQI,QAAQH,GAEvB,IAESkB,EAFLC,GAAU,EAEd,IAASD,KAAOnB,EAAQI,QAAS,CAE/BgB,GAAU,EACV,MAGEA,UACKpB,EAAQI,UAKrB,GAAgB,MAAZH,EACF,IAAK,IAAIkB,KAAOnB,EAAQI,QACtBa,EAAQE,QAGVF,EAAQhB,GAIZ,OAAOD"}